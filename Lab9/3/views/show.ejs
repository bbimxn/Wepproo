<!-- home.ejs -->
<!doctype html>
<html lang="en">

<body>
    <div class="container mt-5">
        <h2 class="mb-4 fw-bold">รายการคำสั่งซื้อ</h2>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>ลูกค้า</th>
                    <th>สินค้า</th>
                    <th>สถานะปัจจุบัน</th>
                    <th>เปลี่ยนสถานะ</th>
                </tr>
            </thead>
            <tbody>
                <% data.forEach((item)=> { %>
                    <tr>
                        <td><%= item.ID %></td> 
                        <td><%= item.customer_name %></td>
                        <td><%= item.product_name %></td>
                        <td><%= item.status %></td> <td>
                            <form action="/update-status" method="GET" style="display:flex; gap:10px;">
                                <input type="hidden" name="id" value="<%= item.ID %>">
                                <select name="status">
                                    <option value="รอดำเนินการ" <%= item.status === 'รอดำเนินการ' ? 'selected' : '' %>>รอดำเนินการ</option>
                                    <option value="กำลังจัดส่ง" <%= item.status === 'กำลังจัดส่ง' ? 'selected' : '' %>>กำลังจัดส่ง</option>
                                    <option value="จัดส่งแล้ว" <%= item.status === 'จัดส่งแล้ว' ? 'selected' : '' %>>จัดส่งแล้ว</option>
                                    <option value="ยกเลิก" <%= item.status === 'ยกเลิก' ? 'selected' : '' %>>ยกเลิก</option>
                                </select>
                                <button type="submit" class="btn-blue">อัปเดต</button>
                            </form>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    </div>
</body>

</html>